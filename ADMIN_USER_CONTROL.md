# ูุธุงู ุงูุชุญูู ุงููุงูู ุจุญุณุงุจุงุช ุงููุณุชุฎุฏููู

## ๐ ุงูููุฒุงุช ุงููุชุงุญุฉ

ุชู ุฅุถุงูุฉ ูุธุงู ุชุญูู ูุงูู ูููุณุคูููู ูุฅุฏุงุฑุฉ ุญุณุงุจุงุช ุงููุณุชุฎุฏููู.

---

## ๐ง ุงูุฏูุงู ุงููุชุงุญุฉ

### 1. `users` - ุฌูุจ ุฌููุน ุงููุณุชุฎุฏููู
**ุงูููุน**: Query  
**ุงููุตู**: ุฌูุจ ูุงุฆูุฉ ุจุฌููุน ุงููุณุชุฎุฏููู ูุน ูุนูููุงุชูู ุงููุงููุฉ ุงููุงููุฉ

**ุงูุงุณุชุฎุฏุงู**:
```typescript
const { data: users } = trpc.admin.users.useQuery();
```

**ุงูุจูุงูุงุช ุงูููุฑุฌุนุฉ**:
- `id`: ูุนุฑู ุงููุณุชุฎุฏู
- `name`: ุงุณู ุงููุณุชุฎุฏู
- `email`: ุงูุจุฑูุฏ ุงูุฅููุชุฑููู
- `role`: ุงูุฏูุฑ (user/admin)
- `totalBalance`: ุงูุฑุตูุฏ ุงูุฅุฌูุงูู (funding + profitBuffer)
- `totalDeposits`: ุฅุฌูุงูู ุงูุชุบุฐูุฉ (funding)
- `netProfits`: ุตุงูู ุงูุฃุฑุจุงุญ (profitBuffer)
- `availableBalance`: ุงูุฑุตูุฏ ุงููุชุงุญ
- `funding`: ุงูุชุบุฐูุฉ
- `profitBuffer`: ูุณุงุฏุฉ ุงูุฃุฑุจุงุญ

---

### 2. `updateBalance` - ุฅุถุงูุฉ/ุฎุตู ุฑุตูุฏ
**ุงูููุน**: Mutation  
**ุงููุตู**: ุฅุถุงูุฉ ุฃู ุฎุตู ุฑุตูุฏ ูู ุญุณุงุจ ุงููุณุชุฎุฏู

**ุงููุฏุฎูุงุช**:
```typescript
{
  userId: string;        // ูุนุฑู ุงููุณุชุฎุฏู
  amount: string;        // ุงููุจูุบ (ุณูุชู ุชุญูููู ุฅูู ุฑูู)
  type: 'add' | 'deduct'; // ููุน ุงูุนูููุฉ
  reason?: string;       // ุณุจุจ ุงูุชุนุฏูู (ุงุฎุชูุงุฑู)
}
```

**ุงูุงุณุชุฎุฏุงู**:
```typescript
const updateBalance = trpc.admin.updateBalance.useMutation();

await updateBalance.mutateAsync({
  userId: 'user_123',
  amount: '100',
  type: 'add',
  reason: 'ููุงูุฃุฉ ุฎุงุตุฉ'
});
```

**ุงูููุทู**:
- **ุฅุถุงูุฉ**: ูุชู ุฅุถุงูุฉ ุงููุจูุบ ุฅูู `funding`
- **ุฎุตู**: ูุชู ุงูุฎุตู ูู `profitBuffer` ุฃููุงูุ ุซู ูู `funding` ุฅุฐุง ูุฒู ุงูุฃูุฑ

**ุชุณุฌูู ุงููุนุงููุฉ**: ูุชู ุชุณุฌูู ุงููุนุงููุฉ ุชููุงุฆูุงู ูู ุฌุฏูู `transactions`

---

### 3. `resetUserAccount` - ุชุตููุฑ ุญุณุงุจ ุงููุณุชุฎุฏู
**ุงูููุน**: Mutation  
**ุงููุตู**: ุชุตููุฑ ุญุณุงุจ ุงููุณุชุฎุฏู (ุญุฐู ุฌููุน ุงูุฃุฑุตุฏุฉ)

**ุงููุฏุฎูุงุช**:
```typescript
{
  userId: string; // ูุนุฑู ุงููุณุชุฎุฏู
}
```

**ุงูุงุณุชุฎุฏุงู**:
```typescript
const resetAccount = trpc.admin.resetUserAccount.useMutation();

await resetAccount.mutateAsync({
  userId: 'user_123'
});
```

**ุงูููุทู**:
- ูุชู ุชุนููู `funding`, `profitBuffer`, ู `availableCapital` ุฅูู 0
- ูุชู ุชุณุฌูู ูุนุงููุฉ ูู `transactions` ูุชูุซูู ุงูุนูููุฉ

---

### 4. `setUserCapital` - ุชุนููู ุฑุตูุฏ ูุญุฏุฏ
**ุงูููุน**: Mutation  
**ุงููุตู**: ุชุนููู ุฑุตูุฏ ูุญุฏุฏ ูููุณุชุฎุฏู (funding ู/ุฃู profitBuffer)

**ุงููุฏุฎูุงุช**:
```typescript
{
  userId: string;
  funding?: number;      // ูููุฉ ุงูุชุบุฐูุฉ ุงูุฌุฏูุฏุฉ (ุงุฎุชูุงุฑู)
  profitBuffer?: number; // ูููุฉ ูุณุงุฏุฉ ุงูุฃุฑุจุงุญ ุงูุฌุฏูุฏุฉ (ุงุฎุชูุงุฑู)
  reason?: string;       // ุณุจุจ ุงูุชุนุฏูู (ุงุฎุชูุงุฑู)
}
```

**ุงูุงุณุชุฎุฏุงู**:
```typescript
const setCapital = trpc.admin.setUserCapital.useMutation();

await setCapital.mutateAsync({
  userId: 'user_123',
  funding: 500,
  profitBuffer: 100,
  reason: 'ุชุนุฏูู ูุฏูู ูู ุงูุฃุฏูู'
});
```

**ุงูููุทู**:
- ูููู ุชุนููู `funding` ู/ุฃู `profitBuffer` ุจุดูู ูุจุงุดุฑ
- ูุชู ุญุณุงุจ `availableCapital` ุชููุงุฆูุงู (funding + profitBuffer)
- ุฅุฐุง ูู ูุชู ุชุญุฏูุฏ ูููุฉุ ูุชู ุงูุงุญุชูุงุธ ุจุงููููุฉ ุงูุญุงููุฉ

---

### 5. `getUserTransactions` - ุฌูุจ ูุนุงููุงุช ุงููุณุชุฎุฏู
**ุงูููุน**: Query  
**ุงููุตู**: ุฌูุจ ุณุฌู ูุนุงููุงุช ุงููุณุชุฎุฏู

**ุงููุฏุฎูุงุช**:
```typescript
{
  userId: string;
  limit?: number; // ุนุฏุฏ ุงููุชุงุฆุฌ (ุงูุชุฑุงุถู: 100)
}
```

**ุงูุงุณุชุฎุฏุงู**:
```typescript
const { data: transactions } = trpc.admin.getUserTransactions.useQuery({
  userId: 'user_123',
  limit: 50
});
```

**ุงูุจูุงูุงุช ุงูููุฑุฌุนุฉ**: ูุงุฆูุฉ ุจุฌููุน ูุนุงููุงุช ุงููุณุชุฎุฏู ูุฑุชุจุฉ ุญุณุจ ุงูุชุงุฑูุฎ (ุงูุฃุญุฏุซ ุฃููุงู)

---

## ๐ ุฃููุงุน ุงููุนุงููุงุช ุงููุณุฌูุฉ

ุนูุฏ ุฅุฌุฑุงุก ุชุนุฏููุงุช ุนูู ุญุณุงุจุงุช ุงููุณุชุฎุฏูููุ ูุชู ุชุณุฌูู ุงููุนุงููุงุช ุงูุชุงููุฉ:

1. **`admin_add`**: ุฅุถุงูุฉ ุฑุตูุฏ ูู ูุจู ุงูุฃุฏูู
2. **`admin_deduct`**: ุฎุตู ุฑุตูุฏ ูู ูุจู ุงูุฃุฏูู
3. **`admin_reset`**: ุชุตููุฑ ุญุณุงุจ ุงููุณุชุฎุฏู
4. **`admin_set_capital`**: ุชุนููู ุฑุตูุฏ ูุญุฏุฏ

ุฌููุน ุงููุนุงููุงุช ุชููู `isCompliant: true` ููุชู ุชุณุฌูู ูุตู ุชูุถูุญู ููู ุนูููุฉ.

---

## ๐ฏ ุฃูุซูุฉ ุงูุงุณุชุฎุฏุงู

### ูุซุงู 1: ุฅุถุงูุฉ ุฑุตูุฏ ููุณุชุฎุฏู
```typescript
const updateBalance = trpc.admin.updateBalance.useMutation();

await updateBalance.mutateAsync({
  userId: 'user_123',
  amount: '500',
  type: 'add',
  reason: 'ููุงูุฃุฉ ุนูุฏ ุงููููุงุฏ'
});
```

### ูุซุงู 2: ุฎุตู ุฑุตูุฏ ูู ูุณุชุฎุฏู
```typescript
await updateBalance.mutateAsync({
  userId: 'user_123',
  amount: '100',
  type: 'deduct',
  reason: 'ุบุฑุงูุฉ ูุฎุงููุฉ'
});
```

### ูุซุงู 3: ุชุตููุฑ ุญุณุงุจ ูุณุชุฎุฏู
```typescript
const resetAccount = trpc.admin.resetUserAccount.useMutation();

await resetAccount.mutateAsync({
  userId: 'user_123'
});
```

### ูุซุงู 4: ุชุนููู ุฑุตูุฏ ูุญุฏุฏ
```typescript
const setCapital = trpc.admin.setUserCapital.useMutation();

await setCapital.mutateAsync({
  userId: 'user_123',
  funding: 1000,
  profitBuffer: 200,
  reason: 'ุชุณููุฉ ุญุณุงุจ'
});
```

---

## ๐ ุงูุฃูุงู

- ุฌููุน ุงูุนูููุงุช ุชุญุชุงุฌ ุฅูู ุตูุงุญูุงุช ุงููุณุคูู (admin)
- ูุชู ุชุณุฌูู ุฌููุน ุงูุนูููุงุช ูู ุฌุฏูู `transactions` ูุชุชุจุน ุงูุชุนุฏููุงุช
- ูููู ุฅุถุงูุฉ ุณุจุจ ููู ุนูููุฉ ูุชูุซูู ุฃูุถู

---

## ๐ ูููู ุงูุจูุงูุงุช

### ุฌุฏูู `capital`
- `funding`: ุฑุฃุณ ุงููุงู ุงูุฃุตูู (ุงูุชุบุฐูุฉ)
- `profitBuffer`: ูุณุงุฏุฉ ุงูุฃูุงู (ุงูุฃุฑุจุงุญ)
- `availableCapital`: ุงูุฑุตูุฏ ุงููุชุงุญ (funding + profitBuffer)

### ุฌุฏูู `transactions`
- `type`: ููุน ุงููุนุงููุฉ
- `amount`: ุงููุจูุบ
- `isCompliant`: ูู ุงููุนุงููุฉ ููุชุฒูุฉ
- `description`: ูุตู ุงููุนุงููุฉ
- `createdAt`: ุชุงุฑูุฎ ุงูุฅูุดุงุก

---

**ุชุงุฑูุฎ ุงูุฅูุดุงุก**: 2024  
**ุงูุญุงูุฉ**: โ ุฌุงูุฒ ููุงุณุชุฎุฏุงู
